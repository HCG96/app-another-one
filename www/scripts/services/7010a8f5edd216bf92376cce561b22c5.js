define(["../6e867381f6333fc9c95b78691e5477b1"],function(e){e.factory("FavouriteFactory",["$q","FileSystemFactory",function(e,r){var n="favourite.txt",t={save:function(t){var o=e.defer();return"object"==typeof t&&t&&(t=JSON.stringify(t)),r.then(function(e){e.writeFile(n,[t]).then(o.resolve)},o.reject),o.promise},read:function(t){var o=e.defer();return r.then(function(e){e.readFile(n,"json",!0).then(function(e){Array.isArray(e)||(e=[]),t&&e.sort(function(e,r){return e>r?1:-1}),o.resolve(e)})},o.reject),o.promise},clear:function(){var t=e.defer();return r.then(function(e){e.deleteFile(n).then(t.resolve,t.reject)},t.reject),t.promise},add:function(r){var n=e.defer();return"number"!=typeof r&&(r=Number(r)),t.read().then(function(e){e.indexOf(r)<0&&e.push(r),t.save(e).then(n.resolve)},n.reject),n.promise},del:function(r){var n=e.defer();return"number"!=typeof r&&(r=Number(r)),t.read().then(function(e){var o=e.indexOf(r);o>=0&&e.splice(o,1),t.save(e).then(n.resolve)},n.reject),n.promise},has:function(r){var n=e.defer();return"number"!=typeof r&&(r=Number(r)),t.read().then(function(e){n.resolve(0<=e.indexOf(r))},n.reject),n.promise}};return t}])});